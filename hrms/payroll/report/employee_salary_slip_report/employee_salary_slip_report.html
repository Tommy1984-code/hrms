{% if data.length %}

  <script src="https://cdn.tailwindcss.com"></script>
 
<!-- HEADER SECTION -->
<div class="bg-white text-sm">
    <div class="flex w-full border border-black h-32 items-center">

        <!-- Left Logo -->
        <div class="border-r border-black flex items-center justify-center w-1/6 h-full p-2">
            <img src="/private/files/Emblem_of_Ethiopia.svg" class="h-full max-h-24 object-contain">
        </div>

        <!-- Federal Government Text -->
        <div class="border-r border-black p-2 text-center flex flex-col justify-center w-2/5 h-full">
            <div class="text-xl font-semibold leading-tight">ኢትዮጵያ ፌዴራላዊ ዴሞክራሲያዊ ሪፐብሊክ</div>
            <div class="text-xl font-semibold leading-tight">የኢትዮጵያ ገቢዎችና ጉምሩክ ባለስልጣን</div>
        </div>

        <!-- Pension Form Title -->
        <div class="border-r border-black p-2 text-center flex flex-col justify-center w-2/5 h-full">
            <div class="text-base font-semibold leading-snug">የሠራተኛ የጡረታ ተያያዥ ክፍያ መጠየቂያ ማስረጃ</div>
            <div class="text-base font-medium leading-snug">የግል ድርጅት ሠራተኞች የጡረታ መዋጮ ማሳወቂያ ቅፅ</div>
            <div class="text-xs leading-snug">(የግል ድርጅቶች ሠራተኞች ጡረታ አዋጅ ቁጥር 715/2003)</div>
        </div>

        <!-- Right Logo -->
        <div class="flex items-center justify-center w-1/6 h-full p-2">
            <img src="/private/files/addis ababa transparent logo.png" class="h-full max-h-24 object-contain">
        </div>

    </div>
</div>

<h1 style="text-align:center; margin-top: 20px; margin-bottom: 10px;">ክፍል 1.የግብር ከፋይ ዝርዝር መረጃ</h1>

<table class="main-table">
    <tr>
        <th>Name of Organization</th>
        <th>Organization TIN number</th>
        <th>Tax Account Number</th>
        <th>Period For Payment</th>
        <th colspan="2">Page List</th>
    </tr>
    <tr>
        <td>{{ data[0].company_name }}</td>
        <td>{{ data[0].organization_tin_number }}</td>
        <td>{{ data[0].tax_account_number }}</td>
        <td>{{data[0].period_for_payment}}</td>
        <td colspan="2">Page 1 of 8</td>
    </tr>
    <tr>
        <th>2.a Region</th>
        <th colspan="2">2.b Zone/Sub-district</th>
        <th colspan="2">5 Name of the Tax Collector</th>
        <th>Document No (for office use)</th>
    </tr>
    <tr>
        <td>{{ data[0].region }}</td>
        <td colspan ="2">{{ data[0].zonesub_district }}</td>
        <td colspan="2">{{ data[0].name_of_the_tax_collector }}</td>
        <td>{{ data[0].document_number_for_office_use_only }}</td>
    </tr>
    <tr>
        <th>2.c Woreda</th>
        <th>2.d Kebele/Farmers' Association</th>
        <th>2.e House Number</th>
        <th>6 Phone NO</th>
        <th>7 Fax No</th>
        <th></th>
    </tr>
    <tr>
        <td>{{ data[0].woreda }}</td>
        <td>{{ data[0].kebele }}</td>
        <td>{{ data[0].house_number }}</td>
        <td>{{ data[0].phone }}</td>
        <td>{{ data[0].fax }}</td>
        <td></td>
        
    </tr>
</table>



<!-- TABLE STYLING -->
<style>
     .main-table {
        width: 100%;
        border-collapse: collapse;
    }
    .main-table th, .main-table td {
        padding: 8px;
        text-align: center;
        border: 1px solid #ccc;
    }
    .main-table th {
        background-color: #f2f2f2;
    }
    .main-table td {
        background-color: #fff;
    }
    .main-table td[colspan="2"], .main-table th[colspan="2"] {
        text-align: left;
    }
    .no-padding-body  th, td {
    padding: 3px !important;
    margin: 0 !important;
  }
    
    
</style>

<!-- REPORT TITLE -->
<h3 style="text-align:center; margin-top: 20px;">ሰንጠረዥ 2.የማስታወቂያ ዝርዝር መረጃ</h3>

<!-- REPORT TABLE -->
<div class="w-full max-w-screen-xl mx-auto">
    <table class="no-padding-body table-fixed border-collapse border border-gray-300 w-full">
      <thead>
        <tr>
          <th rowspan="2" class="w-[40px]  text-[10px] font-bold  text-center border whitespace-nowrap">ተ.ቁ</th>
          <th rowspan="2" class="w-[145px]  text-[12px] font-bold text-left border p-0">የሠራተኛው ስም ፥ የአባት ስም እና የአያት ስም</th>
          <th rowspan="2" class="w-[80px]  text-[10px] font-bold text-left border p-0">የሠራተኛው የግብር ከፋይ መለያ ቁጥር(TIN)</th>
          <th rowspan="2" class="w-[75px]  text-[10px] font-medium text-left border p-0">የተቀጠሩበት ቀን(G.C)</th>
          <th rowspan="2" class="w-[60px]  text-[10px] font-medium text-left border p-0">ደመወዝ(ብር)</th>
          <th rowspan="2" class="w-[55px]  text-[10px] font-medium text-left border p-0">ጠቅላላ የትራንስፖርት አበል(ብር)</th>
          <th colspan="3" class="w-[180px]  text-[10px] font-medium text-center border p-0">ተጨማሩ ክፍያዎች</th>
          <th rowspan="2" class="w-[70px]  text-[10px] font-medium text-left border p-0">ጠቅላላ ግብር የሚከፈልበት ገቢ /ብር/ (ሠ-ሰ-ሽ-ቀ)</th>
          <th rowspan="2" class="w-[60px]  text-[10px] font-medium text-left border p-0">የስራ ግብር (ብር)</th>
          <th rowspan="2" class="w-[60px]  text-[10px] font-medium text-left border p-0">የሰራተኛ ጡረታ መዋጮ</th>
          <th rowspan="2" class="w-[60px]  text-[10px] font-medium text-left border p-0">የድርጅት ጡረታ መዋጮ</th>
          <th rowspan="2" class="w-[55px]  text-[10px] font-medium text-left border p-0">የትምህርት የወጪ መጋራት ክፍያ (ብር)</th>
          <th rowspan="2" class="w-[60px]  text-[10px] font-medium text-left border p-0">ተቀናሾች</th>
          <th rowspan="2" class="w-[60px]  text-[10px] font-medium text-left border p-0">የተጣራ ክፍያ (ብር)</th>
        </tr>
        <tr>
          <th class="w-[60px]  text-[10px] font-medium text-left border p-0">የስራ ግብር የሚከፈልበት የትራንስፖርት አበል(ብር)</th>
          <th class="w-[60px]  text-[10px] font-medium text-left border p-0">የትርፍ ሰዓት ክፍያ(ብር)</th>
          <th class="w-[60px]  text-[9px] font-medium text-left border p-0">ሌሎች ጥቅማጥቅሞች (ብር)</th>
        </tr>
      </thead>
  
      <tbody>
        {% 
          var total_basic_salary = 0;
          var total_transport = 0;
          var total_taxable_transport = 0;
          var total_bonus = 0;
          var total_other_benefit = 0;
          var total_taxable_income = 0;
          var total_employment_tax = 0;
          var total_employee_pension = 0;
          var total_company_pension = 0;
          var total_coast_sharing = 0;
          var total_other_deduction = 0;
          var total_net_pay = 0;
  
          for (var i = 0; i < data.length; i++) {
            total_basic_salary += data[i].basic_salary || 0;
            total_transport += data[i].transport_salary || 0;
            total_taxable_transport += data[i].transport_pesnion || 0;
            total_bonus += data[i].employee_bonus || 0;
            total_other_benefit += data[i].other_benefit || 0;
            total_taxable_income += data[i].total_tax || 0;
            total_employment_tax += data[i].employment_tax || 0;
            total_employee_pension += data[i].employee_pension || 0;
            total_company_pension += data[i].company_pension || 0;
            total_coast_sharing += data[i].coast_sharing || 0;
            total_other_deduction += data[i].deduction || 0;
            total_net_pay += data[i].net_pay || 0;
        %}
        <tr>
          <td class="text-sm text-left border">{{ i + 1 }}</td>
          <td class="text-[11px] text-left  border p-0">{{ data[i].employee_name }}</td>
          <td class=" text-[11px] text-left border p-0">{{ data[i].tin_number }}</td>
          <td class=" text-[11px] text-left border p-0">{{ frappe.datetime.str_to_user(data[i].date_of_hire) }}</td>
          <td class=" text-[11px] text-right border p-0">{{ data[i].basic_salary }}</td>
          <td class=" text-[11px] text-right border p-0">{{ data[i].transport_salary }}</td>
          <td class=" text-[11px] text-right border p-0">{{ data[i].transport_pesnion }}</td>
          <td class=" text-[11px] text-right border p-0">{{ data[i].employee_bonus }}</td>
          <td class=" text-[11px] text-right border p-0">{{ data[i].other_benefit }}</td>
          <td class=" text-[11px] text-right border p-0">{{ data[i].total_tax }}</td>
          <td class=" text-[11px] text-right border p-0">{{ data[i].employment_tax }}</td>
          <td class=" text-[11px] text-right border p-0">{{ data[i].employee_pension }}</td>
          <td class=" text-[11px] text-right border p-0">{{ data[i].company_pension }}</td>
          <td class=" text-[11px] text-right border p-0">{{ data[i].coast_sharing }}</td>
          <td class=" text-[11px] text-right border p-0">{{ data[i].deduction }}</td>
          <td class=" text-[11px] text-right border p-0">{{ data[i].net_pay }}</td>
        </tr>
        {% } %}
      </tbody>
    </table>
  </div>
  

<div style="margin-top: 10px; font-size: 12px; padding-top: 10px;">
    <!-- Acknowledgment Text Box -->
   <!-- Four Column Table (based on scanned document) -->
  <!-- Title -->
<div style="text-align: center; font-weight: bold; font-size: 14px; margin-top: 5px;">
    ክፍል5.የትክክለኛነት ማረጋገጫ
</div>
<table style="width: 100%; border-collapse: collapse; font-size: 12px;">
    <tr>
        <!-- Column 1: Amharic Paragraph (Reduced width) -->
        <td style="width: 35%; border: 1px solid black; padding: 10px;">
            በላይ የተገለጸው ማስታወቂያና የተሰጠው መረጃ በሙሉ የተሞላና ትክክለኛ መሆኑን አረጋግጣለው። ትክክለኛ ያልሆነ መረጃ ማቅረብ በግብር ህጎችም ሆነ 
            በወንጀለኛ መቅጫ ህግ የሚያስቀጣ መሆኑን እገነዘባለው።
        </td>

        <!-- Column 2: Taxpayer Info -->
        <td style="width: 25%; border: 1px solid black; padding: 6px; font-size: 14px; line-height: 1.4;">
            የግብር ከፋይ/ህጋዊ ወኪሉ<br>
            <span style="display: block;">ስም፡ <span style="display: inline-block; border-bottom: 1px solid black; width: 100px;"></span></span>
            <span style="display: block; white-space: nowrap;">
                ፊርማ፡ <span style="display: inline-block; border-bottom: 1px solid black; width: 100px;"></span>
                ቀን፡ <span style="display: inline-block; border-bottom: 1px solid black; width: 100px;"></span>
            </span>
        </td>

        <!-- Column 3: Stamp (Centered) -->
        <td style="width: 15%; border: 1px solid black; padding: 10px; text-align: center; vertical-align: middle;">
            ማህተም
        </td>

        <!-- Column 4: Authority Info -->
        <td style="width: 25%; border: 1px solid black; padding: 6px; font-size: 14px; line-height: 1.4;">
            <span style="display: block;">የግብር ባለስልጣን ስም፡ <span style="display: inline-block; border-bottom: 1px solid black; width: 100px;"></span></span>
            <span style="display: block;">ፊርማ፡ <span style="display: inline-block; border-bottom: 1px solid black; width: 100px;"></span></span>
            <span style="display: block;">ቀን፡ <span style="display: inline-block; border-bottom: 1px solid black; width: 100px;"></span></span>
        </td>
    </tr>
</table>


</div>

<div style="margin-top: 30px; font-size: 12px; padding-top: 15px;">
    <!-- Acknowledgment Text -->
    <!-- Footer Section -->
    <div style="display: flex; justify-content: space-between;">
        <div style="width: 33%;">
            <strong>Name of Payer:</strong> ___________________________<br>
            <strong>የድርጅቱ ከፋይ/ሕጋዊ ወኪል ስም</strong>
        </div>
        <div style="width: 33%;">
            <strong>Signature:</strong> ___________________________<br>
            <strong>ፊርማ</strong>
        </div>
        <div style="width: 33%;">
            <strong>Date:</strong> ___________________________<br>
            <strong>ቀን</strong>
        </div>
    </div>
</div>

</div>

{% else %}
<p>No data available for the selected filters.</p>
{% endif %}

