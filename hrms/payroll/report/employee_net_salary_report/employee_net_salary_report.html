<script src="https://cdn.tailwindcss.com"></script>
<style>
  /* Table headers and totals slightly bold and centered */
  table thead th,
  table tfoot th {
    font-weight: 700 !important;  /* slightly bold */
    color: #111 !important;       /* solid for print */
    /* text-align: center !important; center header and total text */
  }

  /* Table data centered */
  /* table tbody td {
    text-align: center !important;
  } */

  /* Optional: slightly larger font for headers and totals for visibility */
  table thead th,
  table tfoot th {
    font-size: 12px !important;
  }
</style>




<!-- ================= HEADER ================= -->
<div style="width: 100%; margin-bottom: 24px; display: flex; justify-content: space-between; align-items: flex-start;">

  <!-- Logo -->
  <div style="width: 150px;">
    <img src="/files/company-logo.png" alt="Logo" style="max-height: 60px;">
  </div>

  <!-- Title -->
  <div style="flex: 1; text-align: center;">
    <h2 style="margin: 0; font-size: 28px; font-weight: 600;">
      {{ filters.company }}
    </h2>
    <h3 style="margin: 4px 0; font-size: 22px;">
      Payroll Net Salary
      {% if (filters.payment_mode === "Bank" || !filters.payment_mode) { %}
        To Bank
      {% } else { %}
        ({{ filters.payment_mode }})
      {% } %}
    </h3>
  </div>

  <!-- Generated Date -->
  <div style="width: 200px; font-size: 12px; text-align: right;">
    {% 
      let now = new Date();
      let genDate = now.toLocaleString('default', {
        year: 'numeric',
        month: 'long',
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      });
    %}
    Generated on:<br>{{ genDate }}
  </div>
</div>

<!-- ================= SUB HEADER ================= -->
<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px; font-size:14px;">

  {% if ((filters.payment_mode === "Bank" || !filters.payment_mode) && data.length > 0) { %}
    <div>
      <strong>Account Number:</strong> {{ data[0].company_bank_account }}
    </div>
  {% } else { %}
    <div></div>
  {% } %}

  <div style="text-align:center;">
    {% 
      let from = new Date(filters.from_date);
      let fromMonth = from.toLocaleString('default', { month: 'long' });
      let fromYear = from.getFullYear();
    %}
    For the period: {{ fromMonth }} {{ fromYear }}
  </div>

  <div></div>
</div>

<!-- ================= PRINT SETUP ================= -->
<!-- <style>
  @media print {
    @page {
      size: A4 landscape;
      margin: 20mm;
    }
  }
</style> -->

<!-- ================= TABLE ================= -->
<div class="w-full flex justify-center">
  <table class="table-fixed border-collapse border border-gray-500 mx-auto" style="min-width: 800px;">
    <thead>
      <tr>
        <th class="w-[40px] text-[10px] font-bold text-center border">No.</th>
        <th class="w-[200px] text-[12px] font-bold text-left border">Employee Name</th>

        {% if (filters.payment_mode === "Bank" || !filters.payment_mode) { %}
          <th class="w-[150px] text-[10px] font-bold text-left border">Bank Branch</th>
          <th class="w-[150px] text-[10px] font-bold text-left border">Account No.</th>
        {% } else { %}
          <th class="w-[200px] text-[10px] font-bold text-left border">Payment Mode</th>
        {% } %}

        <th class="w-[150px] text-[10px] font-bold text-left border">Amount</th>
      </tr>
    </thead>

    <tbody>
      {% 
        var total_net_pay = 0;
        for (var i = 0; i < data.length; i++) {
          total_net_pay += data[i].amount || 0;
      %}
      <tr>
        <td class="text-[12px] text-center border">{{ i + 1 }}</td>
        <td class="text-[12px] text-left border">{{ data[i].employee_name }}</td>

        {% if (filters.payment_mode === "Bank" || !filters.payment_mode) { %}
          <td class="text-[12px] text-left border">{{ data[i].bank || "" }}</td>
          <td class="text-[12px] text-left border">{{ data[i].bank_ac_no || "" }}</td>
        {% } else { %}
          <td class="text-[12px] text-left border">{{ data[i].payment_mode }}</td>
        {% } %}

        <td class="text-[12px] text-left border">
          {{ (data[i].amount || 0).toFixed(2) }}
        </td>
      </tr>
      {% } %}
    </tbody>

    <tfoot>
      <tr style="background-color:#f1f1f1; border-top:2px solid #292828;">
        <th
          colspan="{% if (filters.payment_mode === 'Bank' || !filters.payment_mode) { %}4{% } else { %}3{% } %}"
          class="text-right text-[12px] font-bold border px-2"
        >
          Total
        </th>
        <th class="text-right text-[12px] font-bold border px-2">
          {{ total_net_pay.toFixed(2) }}
        </th>
      </tr>
    </tfoot>
  </table>
</div>

<!-- ================= SIGNATURES ================= -->
<div style="margin-top: 30px; font-size: 12px;">
  <div style="display:flex; justify-content:space-between; gap:20px;">
    <div style="width:33%;">
      <strong>Prepared By:</strong>_______________<br><br>
      Signature: ___________________<br>
      Date: ___________________
    </div>
    <div style="width:33%;">
      <strong>Checked By:</strong>_______________<br><br>
      Signature: ___________________<br>
      Date: ___________________
    </div>
    <div style="width:33%;">
      <strong>Approved By:</strong>_______________<br><br>
      Signature: ___________________<br>
      Date: ___________________
    </div>
  </div>
</div>
