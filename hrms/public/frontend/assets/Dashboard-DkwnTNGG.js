import{O as q,c as w,A as k,n as i,i as h,f as y,j as A,q as o,l as s,y as R,t as a,a1 as l,v as g}from"./frappe-ui-BFpMoKrE.js";import b from"./BaseLayout-B01mCfdI.js";import V from"./AttendanceRequestItem-CWAPa3nX.js";import $ from"./ShiftRequestItem-C5qj6kZ5.js";import x from"./ShiftAssignmentItem-DC5axPvy.js";import m from"./RequestList-CsAyz8bM.js";import C from"./AttendanceCalendar-BogaoF5q.js";import{g as L,a as j,b as D,m as T,c as N}from"./attendance-CyC7ytlg.js";import"./index-BqtHIGN3.js";import"./notifications-DFpuW_Bb.js";import"./ListItem-D1FsUv_O.js";import"./EmployeeAvatar-Dbb5RHjD.js";import"./ShiftIcon-D-c5-l8U.js";import"./requestSummaryFields-Bks8h9ll.js";import"./FormattedField-CKzuABdt.js";import"./workflow-4wEr-0jW.js";import"./formatters-ed954U0U.js";const F={class:"flex flex-col mt-7 mb-7 p-4 gap-7"},M={class:"w-full"},O={class:"text-lg text-gray-800 font-bold"},P={class:"text-lg text-gray-800 font-bold"},U={class:"w-full"},Y={class:"text-lg text-gray-800 font-bold"},rt={__name:"Dashboard",setup(z){const v=h("$employee"),c=h("$dayjs"),S=q({url:"hrms.api.get_shifts",auto:!0,cache:"hrms:shifts",makeParams(){var t;return{employee:(t=v.data)==null?void 0:t.name}},transform:t=>t.map(e=>(e.doctype="Shift Assignment",e.is_upcoming=!e.end_date||c(e.end_date).isAfter(c()),e.shift_dates=L(e),e.total_shift_days=j(e),e.shift_timing=D(e),e))}),B=w(()=>{var e;const t=(e=S.data)==null?void 0:e.filter(n=>n.is_upcoming);return t==null?void 0:t.slice(0,5)});return(t,e)=>{const n=y("Button"),u=y("router-link");return A(),k(b,{pageTitle:"Attendance"},{body:i(()=>{var _,d,f,p;return[o("div",F,[s(C),o("div",M,[s(u,{to:{name:"AttendanceRequestFormView"}},{default:i(({navigate:r})=>[s(n,{onClick:r,variant:"solid",class:"w-full py-5 text-base"},{default:i(()=>[R(a(t.__("Request Attendance")),1)]),_:2},1032,["onClick"])]),_:1})]),o("div",null,[o("div",O,a(t.__("Recent Attendance Requests")),1),s(m,{component:l(V),items:(d=(_=g(T))==null?void 0:_.data)==null?void 0:d.slice(0,5),addListButton:!0,listButtonRoute:t.__("AttendanceRequestListView")},null,8,["component","items","listButtonRoute"])]),o("div",null,[o("div",P,a(t.__("Upcoming Shifts")),1),s(m,{component:l(x),items:B.value,addListButton:!0,listButtonRoute:"ShiftAssignmentListView",emptyStateMessage:t.__("You have no upcoming shifts")},null,8,["component","items","emptyStateMessage"])]),o("div",U,[s(u,{to:{name:"ShiftRequestFormView"}},{default:i(({navigate:r})=>[s(n,{onClick:r,variant:"solid",class:"w-full py-5 text-base"},{default:i(()=>[R(a(t.__("Request a Shift")),1)]),_:2},1032,["onClick"])]),_:1})]),o("div",null,[o("div",Y,a(t.__("Recent Shift Requests")),1),s(m,{component:l($),items:(p=(f=g(N))==null?void 0:f.data)==null?void 0:p.slice(0,5),addListButton:!0,listButtonRoute:"ShiftRequestListView"},null,8,["component","items"])])])]}),_:1})}}};export{rt as default};
//# sourceMappingURL=Dashboard-DkwnTNGG.js.map
